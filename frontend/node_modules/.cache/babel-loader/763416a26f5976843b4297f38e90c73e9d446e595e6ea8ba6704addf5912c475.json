{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yashk\\\\TurfArena\\\\frontend\\\\src\\\\pages\\\\TurfDetails.js\",\n  _s = $RefreshSig$();\n// Frontend: Updated TurfDetails.js with Mock Payment\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { MapPin, Star, Calendar, Clock } from 'lucide-react';\nimport { getTurf, createBooking, createPaymentOrder, verifyPayment } from '../utils/api';\nimport { useAuth } from '../context/AuthContext';\nimport MockPaymentModal from '../components/MockPaymentModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TurfDetails = () => {\n  _s();\n  var _turf$availability$fi;\n  const {\n    id\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [turf, setTurf] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedDate, setSelectedDate] = useState('');\n  const [selectedSlots, setSelectedSlots] = useState([]);\n  const [bookingLoading, setBookingLoading] = useState(false);\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [currentOrder, setCurrentOrder] = useState(null);\n  const [currentBookingData, setCurrentBookingData] = useState(null);\n  useEffect(() => {\n    fetchTurfDetails();\n  }, [id]);\n  const fetchTurfDetails = async () => {\n    try {\n      const res = await getTurf(id);\n      setTurf(res.data.turf);\n    } catch (error) {\n      console.error('Error fetching turf:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSlotSelection = slot => {\n    if (slot.isBooked) return;\n    const slotKey = `${slot.startTime}-${slot.endTime}`;\n    if (selectedSlots.includes(slotKey)) {\n      setSelectedSlots(selectedSlots.filter(s => s !== slotKey));\n    } else {\n      setSelectedSlots([...selectedSlots, slotKey]);\n    }\n  };\n  const calculateTotalAmount = () => {\n    return selectedSlots.length * turf.pricing.basePrice;\n  };\n  const handleBooking = async () => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    if (selectedSlots.length === 0) {\n      alert('Please select at least one slot');\n      return;\n    }\n    try {\n      setBookingLoading(true);\n\n      // Parse slots\n      const slots = selectedSlots.map(slotKey => {\n        const [startTime, endTime] = slotKey.split('-');\n        return {\n          startTime,\n          endTime\n        };\n      });\n      const totalAmount = calculateTotalAmount();\n\n      // Store booking data for later\n      setCurrentBookingData({\n        turf: id,\n        bookingDate: selectedDate,\n        slots,\n        totalAmount\n      });\n\n      // Create Mock payment order\n      const orderRes = await createPaymentOrder({\n        amount: totalAmount,\n        paymentType: 'booking'\n      });\n      const {\n        order,\n        paymentId\n      } = orderRes.data;\n      setCurrentOrder({\n        ...order,\n        paymentId\n      });\n\n      // Show mock payment modal\n      setShowPaymentModal(true);\n    } catch (error) {\n      console.error('Booking error:', error);\n      alert('Booking failed. Please try again.');\n    } finally {\n      setBookingLoading(false);\n    }\n  };\n  const handlePaymentSuccess = async paymentData => {\n    try {\n      // Verify payment\n      await verifyPayment({\n        razorpayOrderId: paymentData.razorpayOrderId,\n        razorpayPaymentId: paymentData.razorpayPaymentId,\n        razorpaySignature: paymentData.razorpaySignature,\n        paymentId: currentOrder.paymentId\n      });\n\n      // Create booking\n      await createBooking({\n        ...currentBookingData,\n        paymentId: currentOrder.paymentId\n      });\n      setShowPaymentModal(false);\n      alert('Booking successful!');\n      navigate('/bookings');\n    } catch (error) {\n      console.error('Payment verification failed:', error);\n      alert('Payment verification failed');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-green-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this);\n  }\n  if (!turf) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Turf not found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this);\n  }\n  const availableSlots = ((_turf$availability$fi = turf.availability.find(a => a.date === selectedDate)) === null || _turf$availability$fi === void 0 ? void 0 : _turf$availability$fi.slots) || [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4 py-8\",\n    children: /*#__PURE__*/_jsxDEV(MockPaymentModal, {\n      isOpen: showPaymentModal,\n      onClose: () => setShowPaymentModal(false),\n      amount: calculateTotalAmount(),\n      orderId: currentOrder === null || currentOrder === void 0 ? void 0 : currentOrder.id,\n      onSuccess: handlePaymentSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n};\n_s(TurfDetails, \"Jm8wWulTUbh8kXnbw4QVnjnleso=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = TurfDetails;\nexport default TurfDetails;\nvar _c;\n$RefreshReg$(_c, \"TurfDetails\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","MapPin","Star","Calendar","Clock","getTurf","createBooking","createPaymentOrder","verifyPayment","useAuth","MockPaymentModal","jsxDEV","_jsxDEV","TurfDetails","_s","_turf$availability$fi","id","user","navigate","turf","setTurf","loading","setLoading","selectedDate","setSelectedDate","selectedSlots","setSelectedSlots","bookingLoading","setBookingLoading","showPaymentModal","setShowPaymentModal","currentOrder","setCurrentOrder","currentBookingData","setCurrentBookingData","fetchTurfDetails","res","data","error","console","handleSlotSelection","slot","isBooked","slotKey","startTime","endTime","includes","filter","s","calculateTotalAmount","length","pricing","basePrice","handleBooking","alert","slots","map","split","totalAmount","bookingDate","orderRes","amount","paymentType","order","paymentId","handlePaymentSuccess","paymentData","razorpayOrderId","razorpayPaymentId","razorpaySignature","className","children","fileName","_jsxFileName","lineNumber","columnNumber","availableSlots","availability","find","a","date","isOpen","onClose","orderId","onSuccess","_c","$RefreshReg$"],"sources":["C:/Users/yashk/TurfArena/frontend/src/pages/TurfDetails.js"],"sourcesContent":["// Frontend: Updated TurfDetails.js with Mock Payment\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { MapPin, Star, Calendar, Clock } from 'lucide-react';\r\nimport { getTurf, createBooking, createPaymentOrder, verifyPayment } from '../utils/api';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport MockPaymentModal from '../components/MockPaymentModal';\r\n\r\nconst TurfDetails = () => {\r\n  const { id } = useParams();\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [turf, setTurf] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedDate, setSelectedDate] = useState('');\r\n  const [selectedSlots, setSelectedSlots] = useState([]);\r\n  const [bookingLoading, setBookingLoading] = useState(false);\r\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n  const [currentOrder, setCurrentOrder] = useState(null);\r\n  const [currentBookingData, setCurrentBookingData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchTurfDetails();\r\n  }, [id]);\r\n\r\n  const fetchTurfDetails = async () => {\r\n    try {\r\n      const res = await getTurf(id);\r\n      setTurf(res.data.turf);\r\n    } catch (error) {\r\n      console.error('Error fetching turf:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSlotSelection = (slot) => {\r\n    if (slot.isBooked) return;\r\n    \r\n    const slotKey = `${slot.startTime}-${slot.endTime}`;\r\n    if (selectedSlots.includes(slotKey)) {\r\n      setSelectedSlots(selectedSlots.filter(s => s !== slotKey));\r\n    } else {\r\n      setSelectedSlots([...selectedSlots, slotKey]);\r\n    }\r\n  };\r\n\r\n  const calculateTotalAmount = () => {\r\n    return selectedSlots.length * turf.pricing.basePrice;\r\n  };\r\n\r\n  const handleBooking = async () => {\r\n    if (!user) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    if (selectedSlots.length === 0) {\r\n      alert('Please select at least one slot');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setBookingLoading(true);\r\n\r\n      // Parse slots\r\n      const slots = selectedSlots.map(slotKey => {\r\n        const [startTime, endTime] = slotKey.split('-');\r\n        return { startTime, endTime };\r\n      });\r\n\r\n      const totalAmount = calculateTotalAmount();\r\n\r\n      // Store booking data for later\r\n      setCurrentBookingData({\r\n        turf: id,\r\n        bookingDate: selectedDate,\r\n        slots,\r\n        totalAmount\r\n      });\r\n\r\n      // Create Mock payment order\r\n      const orderRes = await createPaymentOrder({\r\n        amount: totalAmount,\r\n        paymentType: 'booking'\r\n      });\r\n\r\n      const { order, paymentId } = orderRes.data;\r\n      setCurrentOrder({ ...order, paymentId });\r\n      \r\n      // Show mock payment modal\r\n      setShowPaymentModal(true);\r\n      \r\n    } catch (error) {\r\n      console.error('Booking error:', error);\r\n      alert('Booking failed. Please try again.');\r\n    } finally {\r\n      setBookingLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePaymentSuccess = async (paymentData) => {\r\n    try {\r\n      // Verify payment\r\n      await verifyPayment({\r\n        razorpayOrderId: paymentData.razorpayOrderId,\r\n        razorpayPaymentId: paymentData.razorpayPaymentId,\r\n        razorpaySignature: paymentData.razorpaySignature,\r\n        paymentId: currentOrder.paymentId\r\n      });\r\n\r\n      // Create booking\r\n      await createBooking({\r\n        ...currentBookingData,\r\n        paymentId: currentOrder.paymentId\r\n      });\r\n\r\n      setShowPaymentModal(false);\r\n      alert('Booking successful!');\r\n      navigate('/bookings');\r\n    } catch (error) {\r\n      console.error('Payment verification failed:', error);\r\n      alert('Payment verification failed');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-green-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!turf) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <p>Turf not found</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const availableSlots = turf.availability.find(\r\n    a => a.date === selectedDate\r\n  )?.slots || [];\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      {/* ... rest of the TurfDetails component remains the same ... */}\r\n      \r\n      {/* Mock Payment Modal */}\r\n      <MockPaymentModal\r\n        isOpen={showPaymentModal}\r\n        onClose={() => setShowPaymentModal(false)}\r\n        amount={calculateTotalAmount()}\r\n        orderId={currentOrder?.id}\r\n        onSuccess={handlePaymentSuccess}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TurfDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}