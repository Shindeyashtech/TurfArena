{"ast":null,"code":"// src/context/SocketContext.js\nimport React,{createContext,useContext,useEffect,useState}from'react';import io from'socket.io-client';import{useAuth}from'./AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const SocketContext=/*#__PURE__*/createContext();export const useSocket=()=>useContext(SocketContext);export const SocketProvider=_ref=>{let{children}=_ref;const[socket,setSocket]=useState(null);const{user}=useAuth();useEffect(()=>{if(user){const token=localStorage.getItem('token');const newSocket=io(process.env.REACT_APP_API_URL,{auth:{token}});setSocket(newSocket);return()=>newSocket.close();}},[user]);return/*#__PURE__*/_jsx(SocketContext.Provider,{value:socket,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","io","useAuth","jsx","_jsx","SocketContext","useSocket","SocketProvider","_ref","children","socket","setSocket","user","token","localStorage","getItem","newSocket","process","env","REACT_APP_API_URL","auth","close","Provider","value"],"sources":["C:/Users/yashk/TurfArena/frontend/src/context/SocketContext.js"],"sourcesContent":["// src/context/SocketContext.js\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst SocketContext = createContext();\r\n\r\nexport const useSocket = () => useContext(SocketContext);\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      const token = localStorage.getItem('token');\r\n      const newSocket = io(process.env.REACT_APP_API_URL, {\r\n        auth: { token }\r\n      });\r\n\r\n      setSocket(newSocket);\r\n\r\n      return () => newSocket.close();\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <SocketContext.Provider value={socket}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC7E,MAAO,CAAAC,EAAE,KAAM,kBAAkB,CACjC,OAASC,OAAO,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,aAAa,cAAGR,aAAa,CAAC,CAAC,CAErC,MAAO,MAAM,CAAAS,SAAS,CAAGA,CAAA,GAAMR,UAAU,CAACO,aAAa,CAAC,CAExD,MAAO,MAAM,CAAAE,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACzC,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAAEY,IAAK,CAAC,CAAGV,OAAO,CAAC,CAAC,CAE1BH,SAAS,CAAC,IAAM,CACd,GAAIa,IAAI,CAAE,CACR,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,SAAS,CAAGf,EAAE,CAACgB,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAAE,CAClDC,IAAI,CAAE,CAAEP,KAAM,CAChB,CAAC,CAAC,CAEFF,SAAS,CAACK,SAAS,CAAC,CAEpB,MAAO,IAAMA,SAAS,CAACK,KAAK,CAAC,CAAC,CAChC,CACF,CAAC,CAAE,CAACT,IAAI,CAAC,CAAC,CAEV,mBACER,IAAA,CAACC,aAAa,CAACiB,QAAQ,EAACC,KAAK,CAAEb,MAAO,CAAAD,QAAA,CACnCA,QAAQ,CACa,CAAC,CAE7B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}